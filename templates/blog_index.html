<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{{ title or 'Blog - Your Dropshipping Store' }}</title>
  <meta name="description" content="{{ description or 'Read the latest tips, trends, and news about dropshipping, trending products, and e-commerce success.' }}">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
</head>
<body class="bg-gray-50 font-sans min-h-screen flex flex-col">
  <header class="bg-blue-600 p-6 text-white text-center" role="banner">
    <h1 class="text-3xl font-bold" tabindex="0">Your Dropshipping Store Blog</h1>
    <nav class="mt-2" aria-label="Main Navigation">
      <a href="/" class="mx-2 underline" aria-label="Home">Home</a>
      <a href="/blog.html" class="mx-2 underline font-bold" aria-label="Blog">Blog</a>
      <a href="/about.html" class="mx-2 underline" aria-label="About">About</a>
      <a href="/terms.html" class="mx-2 underline" aria-label="Terms of Service">Terms</a>
      <a href="/privacy.html" class="mx-2 underline" aria-label="Privacy Policy">Privacy</a>
      <a href="/contact.html" class="mx-2 underline" aria-label="Contact">Contact</a>
    </nav>
  </header>
  <main class="flex-1 flex flex-col items-center justify-start p-4" role="main">
    <section class="w-full max-w-3xl bg-white p-8 rounded shadow-md mt-6 mb-8">
      <h2 class="text-2xl font-semibold mb-6" tabindex="0">Latest Blog Posts</h2>
      <input type="text" id="searchInput" placeholder="Search blog..." class="p-2 border rounded w-full mb-4" aria-label="Search blog">
      <ul id="searchResults" class="space-y-8"></ul>
      <ul id="allPosts" class="space-y-8">
        {% for post in posts %}
        <li class="border-b pb-4">
          <a href="/{{ post.slug }}.html" class="text-xl font-bold text-blue-700 underline">{{ post.title }}</a>
          <div class="text-sm text-gray-600 mt-1">By <a href="/author-{{ post.author }}.html" class="underline">{{ authors[post.author].name }}</a> | {{ post.date_obj.strftime('%B %d, %Y') }}</div>
          <div class="mt-2">
            {% for tag in post.tags %}
              <a href="/tag-{{ tag }}.html" class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded mr-2">#{{ tag }}</a>
            {% endfor %}
          </div>
          <p class="mt-2 text-gray-700">{{ post.summary }}</p>
          {% if post.featured %}
            <span class="inline-block bg-yellow-200 text-yellow-800 text-xs px-2 py-1 rounded mt-2">Featured</span>
          {% endif %}
        </li>
        {% endfor %}
      </ul>
      <script>
        let posts = [];
        fetch('/search.json').then(r => r.json()).then(data => { posts = data; });
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        const allPosts = document.getElementById('allPosts');
        searchInput.addEventListener('input', function() {
          const q = this.value.trim().toLowerCase();
          if (!q) {
            searchResults.innerHTML = '';
            allPosts.style.display = '';
            return;
          }
          const results = posts.filter(p =>
            p.title.toLowerCase().includes(q) ||
            p.summary.toLowerCase().includes(q) ||
            p.tags.join(' ').toLowerCase().includes(q)
          );
          allPosts.style.display = 'none';
          searchResults.innerHTML = results.map(p =>
            `<li class='border-b pb-4'>
              <a href='/${p.slug}.html' class='text-xl font-bold text-blue-700 underline'>${p.title}</a>
              <div class='text-sm text-gray-600 mt-1'>${p.date}</div>
              <div class='mt-2'>${p.tags.map(tag => `<a href='/tag-${tag}.html' class='inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded mr-2'>#${tag}</a>`).join('')}</div>
              <p class='mt-2 text-gray-700'>${p.summary}</p>
            </li>`
          ).join('');
        });
      </script>
    </section>
  </main>
  <footer class="bg-blue-600 text-white p-4 text-center mt-auto" role="contentinfo">
    &copy; 2025 Your Dropshipping Store. All rights reserved.
  </footer>
</body>
</html>
